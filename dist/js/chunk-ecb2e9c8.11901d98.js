(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ecb2e9c8"],{2437:function(t,e,s){"use strict";s("51db")},"51db":function(t,e,s){},a55b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"login"}},[s("div",{staticClass:"iconImg"},[s("img",{attrs:{src:t.icon,alt:""}})]),s("van-form",{staticClass:"LoginForm",on:{submit:t.onSubmit}},[s("van-field",{staticClass:"ipt",attrs:{name:"username",label:"用户名",placeholder:"请输入用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("van-field",{staticClass:"ipt",attrs:{type:"password",name:"password",label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("div",{staticClass:"getYZM"},[s("label",[t._v("验证码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.CAPTCHA,expression:"CAPTCHA"}],staticClass:"form-control",attrs:{type:"text",name:"yzm",placeholder:"请输入验证码",autocomplete:"off"},domProps:{value:t.CAPTCHA},on:{input:function(e){e.target.composing||(t.CAPTCHA=e.target.value)}}}),s("img",{ref:"yzm",attrs:{src:"/api/yzm",alt:""},on:{click:function(e){return t.yzmImg()}}})]),s("div",{staticClass:"btn"},[s("van-button",{staticClass:"btn-login",attrs:{type:"info","native-type":"submit"}},[t._v(" 登录 ")])],1),s("router-link",{staticClass:"a-register",attrs:{to:"/register"}},[t._v("新用户注册")])],1)],1)},n=[],o=s("01e2"),i={data:function(){return{username:"",password:"",CAPTCHA:"",token:"",icon:"//gw.alicdn.com/tfs/TB1QfeUQAvoK1RjSZFDXXXY3pXa-300-138.png"}},methods:{onSubmit:function(t){var e=this;console.log("submit",t),this.$axios.post("/api/users/login",{username:this.username,password:this.password,CAPTCHA:this.CAPTCHA}).then((function(t){console.log(t.data),0==t.data.code?(o["a"].success("恭喜你，登录成功！"),e.$router.push("/home"),localStorage.setItem("token",t.data.token)):o["a"].fail("登录失败，请重新登录！")})).catch((function(t){o["a"].fail("登录失败，请重新登录！")}))},yzmImg:function(){this.$refs.yzm.src="/api/yzm?"+Math.random()}},created:function(){},mounted:function(){this.yzmImg()}},r=i,c=(s("2437"),s("c701")),l=Object(c["a"])(r,a,n,!1,null,"3fff58f1",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-ecb2e9c8.11901d98.js.map